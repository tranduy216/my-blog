---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";


// Láº¥y collection
const technical = await getCollection("technical");
const physical = await getCollection("physical");
const mental = await getCollection("mental");
const base = import.meta.env.BASE_URL;

// HÃ m sort theo sá»‘ file (1.mdx, 2.mdx, 10.mdx)
function sortByNumber(a, b) {
  return a.slug.localeCompare(b.slug, undefined, { numeric: true });
}

// Gom láº¡i thÃ nh sections
const sections = [
  { name: "technical", items: technical.sort(sortByNumber) },
  { name: "physical", items: physical.sort(sortByNumber) },
  { name: "mental", items: mental.sort(sortByNumber) },
];
---

<Layout title="Home">
  <main class="container">
    <h1>Blog Tree</h1>

    {sections.map((section) => (
      <div class="folder">
        <div class="folder-title">ðŸ“‚ {section.name}</div>

        <ul>
          {section.items.map((post) => (
            <li>
              <a href={`${base}/${section.name}/${post.slug}`}>
                {post.slug}. {post.data.title}. {post.data.date}
              </a>
            </li>
          ))}
        </ul>
      </div>
    ))}
  </main>
</Layout>

<style>
  .container {
    max-width: 720px;
    margin: 5rem auto;
    padding: 0 1rem;
    font-family: Inter, system-ui, sans-serif;
  }

  h1 {
    font-size: 28px;
    margin-bottom: 2rem;
  }

  .folder {
    margin-bottom: 2rem;
  }

  .folder-title {
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  ul {
    list-style: none;
    padding-left: 1.5rem;
  }

  li {
    margin: 0.4rem 0;
    position: relative;
  }

  li::before {
    content: "â”œâ”€";
    position: absolute;
    left: -1.5rem;
    color: #64748b;
  }

  a {
    text-decoration: none;
    color: #2563eb;
  }

  a:hover {
    text-decoration: underline;
  }
</style>